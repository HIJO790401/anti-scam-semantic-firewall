<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>AI Semantic Governance Engine｜反詐騙語意防火牆 Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050712;
      --bg-alt: #0b0f1c;
      --card: #0f1424;
      --card-soft: #131a2b;
      --border: #222a40;
      --accent: #ffc94a;
      --accent-soft: rgba(255, 201, 74, 0.18);
      --cyan: #37f2ff;
      --cyan-soft: rgba(55, 242, 255, 0.18);
      --danger: #ff4b81;
      --danger-soft: rgba(255, 75, 129, 0.18);
      --text-main: #f7f7ff;
      --text-sub: #a7b0d5;
      --radius-xl: 22px;
      --radius-lg: 18px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.8);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      height: 100%;
      background: radial-gradient(circle at top, #192040 0, #050712 55%);
      color: var(--text-main);
      font-family: var(--font-sans);
      -webkit-font-smoothing: antialiased;
    }

    body {
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 1160px;
      background: radial-gradient(circle at top left, #252b52 0, #050712 60%);
      border-radius: 28px;
      border: 1px solid rgba(123, 146, 255, 0.4);
      box-shadow: var(--shadow-soft);
      padding: 20px 18px 28px;
      position: relative;
      overflow: hidden;
    }

    .app::before {
      content: "";
      position: absolute;
      inset: -120px;
      background:
        radial-gradient(circle at 10% -10%, rgba(255, 201, 74, 0.08) 0, transparent 55%),
        radial-gradient(circle at 120% 0, rgba(55, 242, 255, 0.12) 0, transparent 60%);
      pointer-events: none;
      opacity: 0.9;
    }

    .app-inner {
      position: relative;
      z-index: 1;
    }

    header {
      border-radius: 24px;
      padding: 18px 18px 14px;
      background: linear-gradient(145deg, #151a2c, #090c16);
      border: 1px solid rgba(175, 194, 255, 0.35);
      box-shadow: 0 16px 45px rgba(3, 6, 20, 0.95);
      margin-bottom: 18px;
    }
.badge-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      background: radial-gradient(circle at top left, #ffc94a 0, #b26b00 60%, #3e2600 100%);
      color: #120b03;
      font-weight: 650;
      box-shadow: 0 0 24px rgba(255, 201, 74, 0.48);
      white-space: nowrap;
    }

    .badge span {
      opacity: 0.9;
    }

    .badge.badge-outline {
      background: transparent;
      color: var(--text-sub);
      border: 1px solid rgba(187, 200, 255, 0.52);
      box-shadow: none;
    }

    .title-main {
      font-size: 24px;
      font-weight: 750;
      letter-spacing: 0.04em;
      margin-bottom: 4px;
      color: #ffecc0;
    }

    .title-sub {
      font-size: 19px;
      font-weight: 650;
      margin-bottom: 8px;
    }

    .subline {
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      align-items: center;
      font-size: 12px;
    }

    .meta-row span {
      color: var(--text-sub);
    }

    .meta-row strong {
      color: #ffffff;
      font-weight: 600;
    }

    .pill-row {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .pill-btn {
      border-radius: 999px;
      padding: 7px 14px;
      border: 1px solid rgba(153, 178, 255, 0.65);
      background: radial-gradient(circle at top, rgba(55, 242, 255, 0.12), rgba(6, 10, 32, 0.96));
      font-size: 12px;
      color: var(--text-main);
      display: inline-flex;
      gap: 8px;
      align-items: center;
    }

    .pill-btn.secondary {
      border-color: rgba(255, 201, 74, 0.85);
      background: radial-gradient(circle at top, rgba(255, 201, 74, 0.18), rgba(7, 8, 20, 0.95));
    }

    @media (max-width: 880px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }

      .app {
        padding: 16px 12px 22px;
        border-radius: 22px;
      }

      header {
        padding: 14px 14px 12px;
        border-radius: 18px;
      }
    }

    .panel {
      background: radial-gradient(circle at top left, #1a203b 0, #080a15 58%);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(119, 141, 219, 0.65);
      padding: 14px 15px 15px;
      margin-bottom: 12px;
      box-shadow: 0 12px 45px rgba(0, 0, 0, 0.9);
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(55, 242, 255, 0.12), transparent 65%);
      mix-blend-mode: screen;
      opacity: 0.55;
      pointer-events: none;
    }

    .panel-header {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 10px;
    }

    .panel-title {
      font-size: 14px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #a2b7ff;
      font-weight: 650;
    }

    .panel-title span {
      color: #ffd36b;
    }

    .panel-subtitle {
      font-size: 13px;
      color: var(--text-sub);
    }

    .panel-badge {
      font-size: 11px;
      padding: 2px 9px;
      border-radius: 999px;
      border: 1px solid rgba(187, 200, 255, 0.6);
      color: var(--text-sub);
      white-space: nowrap;
    }

    .input-area {
      position: relative;
      z-index: 1;
    }
textarea {
      width: 100%;
      min-height: 170px;
      resize: vertical;
      border-radius: 18px;
      border: 1px solid rgba(153, 182, 255, 0.6);
      background: radial-gradient(circle at top left, #151a2c 0, #050814 56%);
      color: var(--text-main);
      padding: 12px 13px;
      font-size: 14px;
      line-height: 1.55;
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(9, 16, 40, 0.9);
    }

    textarea::placeholder {
      color: rgba(144, 158, 210, 0.82);
    }

    .input-footer {
      margin-top: 9px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
      font-size: 11px;
      color: var(--text-sub);
    }

    .input-warning {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .input-warning span {
      color: #ffd36b;
      font-size: 13px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .btn {
      padding: 7px 15px;
      border-radius: 999px;
      border: 1px solid rgba(170, 187, 255, 0.78);
      background: radial-gradient(circle at top, rgba(55, 242, 255, 0.18), rgba(6, 10, 32, 0.98));
      font-size: 13px;
      color: var(--text-main);
      cursor: pointer;
      display: inline-flex;
      gap: 6px;
      align-items: center;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
    }

    .btn span {
      font-size: 12px;
      color: rgba(195, 205, 255, 0.9);
    }

    .btn-primary {
      border-color: rgba(255, 201, 74, 0.95);
      background: radial-gradient(circle at top, #ffd36b, #ff9b2a);
      color: #1b1203;
      font-weight: 650;
      box-shadow: 0 0 22px rgba(255, 201, 74, 0.8);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.75);
    }

    .btn-primary:hover {
      box-shadow: 0 0 30px rgba(255, 201, 74, 0.95);
    }

    .risk-chip {
      padding: 2px 9px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 650;
      min-width: 70px;
      text-align: center;
    }

    .risk-safe {
      background: rgba(65, 214, 145, 0.14);
      border: 1px solid rgba(73, 232, 161, 0.9);
      color: #a5ffcf;
      box-shadow: 0 0 12px rgba(73, 232, 161, 0.7);
    }

    .risk-risk {
      background: rgba(255, 166, 74, 0.2);
      border: 1px solid rgba(255, 196, 112, 0.9);
      color: #ffd9a3;
      box-shadow: 0 0 12px rgba(255, 184, 92, 0.8);
    }

    .risk-fatal {
      background: rgba(255, 75, 129, 0.2);
      border: 1px solid rgba(255, 124, 170, 0.9);
      color: #ffbed9;
      box-shadow: 0 0 14px rgba(255, 75, 129, 0.85);
    }

    .risk-nonclosable {
      background: radial-gradient(circle at top left, rgba(211, 166, 255, 0.35), rgba(122, 81, 255, 0.4));
      border: 1px solid rgba(228, 198, 255, 0.95);
      color: #fff3ff;
      box-shadow: 0 0 18px rgba(197, 166, 255, 0.9);
    }

    .risk-body {
      position: relative;
      z-index: 1;
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .risk-body strong {
      color: #ffffff;
      font-weight: 600;
    }

    .scbkr-grid {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 8px;
      margin-top: 4px;
    }

    .scbkr-card {
      border-radius: 15px;
      padding: 7px 9px 8px;
      background: linear-gradient(145deg, #161b2c, #080910);
      border: 1px solid rgba(138, 160, 238, 0.8);
      font-size: 11px;
      line-height: 1.45;
    }

    .scbkr-label {
      font-weight: 650;
      letter-spacing: 0.09em;
      font-size: 11px;
      text-transform: uppercase;
      color: #c5d3ff;
      margin-bottom: 2px;
    }

    .scbkr-label span {
      color: #7fe5ff;
    }

    .scbkr-status {
      font-size: 11px;
      color: var(--text-sub);
    }

    .scbkr-status strong {
      color: #ffffff;
    }

    .chip-small {
      display: inline-flex;
      padding: 1px 6px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(179, 197, 255, 0.7);
      color: #d3ddff;
      margin-left: 6px;
    }

    .chip-small.danger {
      border-color: rgba(255, 134, 178, 0.95);
      color: #ffc0dd;
      background: rgba(255, 75, 129, 0.22);
    }

    .list {
      position: relative;
      z-index: 1;
      padding-left: 16px;
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.55;
    }

    .list li + li {
      margin-top: 4px;
    }

    .list strong {
      color: #ffffff;
    }

    .role-status {
      position: relative;
      z-index: 1;
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.55;
    }

    .role-status strong {
      color: #ffffff;
    }

    .hint-link {
      display: inline-block;
      margin-top: 4px;
      font-size: 11px;
      color: #7fe5ff;
      text-decoration: underline dotted;
      text-underline-offset: 3px;
      cursor: pointer;
    }

    .hint-link:hover {
      color: #b6f3ff;
    }

    footer {
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-sub);
      text-align: right;
    }

    footer a {
      color: #7fe5ff;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="app-inner">
      <header>
        <div class="badge-row">
          <div class="badge">
            <span>HACKATHON DEMO</span>
          </div>
          <div class="badge badge-outline">
            Anti-Scam Semantic Firewall · 2026
          </div>
        </div>
        <div class="title-main">AI Semantic Governance Engine</div>
        <div class="title-sub">語意治理與詐騙偵測 Demo</div>
        <p class="subline">
          Paste any suspicious message. The engine will analyze risk, responsibility chain
          (SCBKR), and suggest safe actions.<br />
          貼上可能為詐騙或高風險的訊息，系統將標記風險、拆解責任鏈並給出行動建議。
        </p>
        <div class="meta-row">
          <span>Author 作者：<strong>沈耀 888π / Wen-Yao Hsu（Taichung, Taiwan）</strong></span>
          <span>Focus：<strong>Semantic Firewall · SCBKR · Ex(y)=π 角色治理</strong></span>
        </div>
        <div class="pill-row">
          <button type="button" class="pill-btn">
            <span class="pill-dot"></span>
            Demo for Anti-Scam Track｜反詐騙組 Demo
          </button>
          <button type="button" class="pill-btn secondary">
            <span class="pill-dot"></span>
            View on GitHub（Placeholder）
          </button>
        </div>
      </header>

      <main>
        <!-- LEFT COLUMN -->
        <div>
          <!-- INPUT PANEL (唯一的一個) -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  INPUT <span>| 可疑訊息輸入</span>
                </div>
                <div class="panel-subtitle">
                  Paste SMS / Line / Email / Web text that may be a scam.<br />
                  貼上簡訊、Line、電子郵件或網頁內容。
                </div>
              </div>
              <div class="panel-badge">LLM-AGNOSTIC FRONT LAYER</div>
            </div>

            <div class="input-area">
              <textarea id="messageInput" placeholder="例如：【國泰世華銀行通知】您帳戶因風險監管暫時凍結，需於 30 分鐘內完成身份驗證並匯款至指定安全帳戶，逾期將永久停用。請立即點擊以下連結或加入 LINE 客服 ID 進行處理。"></textarea>
              <div class="input-footer">
                <div class="input-warning">
                  <span>⚠</span>請勿貼入真實密碼或完整身分證號。
                </div>
                <div class="btn-row">
                  <button type="button" class="btn" onclick="clearInput()">
                    CLEAR <span>清除</span>
                  </button>
                  <button type="button" class="btn btn-primary" onclick="analyzeMessage()">
                    ◎ ANALYZE <span>分析</span>
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- RISK PANEL -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  RISK LEVEL <span>| 風險等級</span>
                </div>
                <div class="panel-subtitle">
                  Overall semantic risk assessment. 整體語意風險評估。
                </div>
              </div>
              <div id="riskBadge" class="risk-chip risk-safe">SAFE｜安全的</div>
            </div>
            <div id="riskText" class="risk-body">
              Waiting for input. 請貼上訊息後按「分析」。
            </div>
          </section>

          <!-- ACTION PANEL -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  ACTION GUIDANCE <span>| 行動建議</span>
                </div>
                <div class="panel-subtitle">
                  Next steps you should / should not take. 接下來你應該／不應該做什麼。
                </div>
              </div>
            </div>
            <ul id="actionList" class="list">
              <li>尚未分析。分析訊息後會產生具體建議。</li>
            </ul>
          </section>
        </div>

        <!-- RIGHT COLUMN -->
        <div>
          <!-- SCBKR PANEL -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  SCBKR RESPONSIBILITY CHAIN <span>| 責任鏈拆解</span>
                </div>
                <div class="panel-subtitle">
                  Subject · Cause · Boundary · Cost · Responsibility.
                  若某些欄位缺失，代表此訊息在責任鏈上存在「追溯空白」，風險更高。
                </div>
              </div>
              <div class="panel-badge" id="scbkrStatus">Status：Idle 待分析</div>
            </div>

            <div class="scbkr-grid">
              <div class="scbkr-card">
                <div class="scbkr-label">S｜<span>SUBJECT 主體</span></div>
                <div id="sText" class="scbkr-status">
                  尚未分析。
                </div>
              </div>
              <div class="scbkr-card">
                <div class="scbkr-label">C｜<span>CAUSE 原因</span></div>
                <div id="cText" class="scbkr-status">
                  尚未分析。
                </div>
              </div>
              <div class="scbkr-card">
                <div class="scbkr-label">B｜<span>BOUNDARY 邊界</span></div>
                <div id="bText" class="scbkr-status">
                  尚未分析。
                </div>
              </div>
              <div class="scbkr-card">
                <div class="scbkr-label">K｜<span>COST 成本</span></div>
                <div id="kText" class="scbkr-status">
                  尚未分析。
                </div>
              </div>
              <div class="scbkr-card">
                <div class="scbkr-label">R｜<span>RESP. 責任</span></div>
                <div id="rText" class="scbkr-status">
                  尚未分析。
                </div>
              </div>
            </div>
          </section>

          <!-- EVIDENCE PANEL -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  EVIDENCE PATTERNS <span>| 語意特徵與線索</span>
                </div>
                <div class="panel-subtitle">
                  Key phrases / patterns used in scams. 詐騙常用語意模式。
                </div>
              </div>
              <div class="panel-badge" id="evidenceCount">偵測到 0 個特徵</div>
            </div>

            <ul id="evidenceList" class="list">
              <li>尚未分析。分析後會列出關鍵字、威脅／獎勵模式與可疑語氣。</li>
            </ul>
          </section>

          <!-- ROLE / Ex(y)=π PANEL -->
          <section class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">
                  ROLE INTEGRITY <span>| EX(Y)=π 治理層</span>
                </div>
                <div class="panel-subtitle">
                  Checks if the message pretends to be bank / gov / platform.<br />
                  檢查訊息是否偽裝成銀行、政府或官方平台。
                </div>
              </div>
            </div>

            <div id="roleText" class="role-status">
              模型角色 = Tool Only 工具層；尚未對此訊息進行角色檢查。
            </div>
            <div class="hint-link">
              Ex(y)=π：發話者角色只能是「工具／通知」，不得偷渡成決策者。
            </div>
          </section>
        </div>
      </main>

      <footer>
        Hackathon Demo｜Anti-Scam Semantic Firewall V3 · Built by Shen-Yao 888π.<br />
        Demo link｜<a href="https://hijo790401.github.io/anti-scam-semantic-firewall/" target="_blank"
          rel="noopener noreferrer">https://hijo790401.github.io/anti-scam-semantic-firewall/</a>
      </footer>
    </div>
  </div>

  <script>
    function clearInput() {
      document.getElementById("messageInput").value = "";
      // Reset panels
      setRisk("SAFE", "Waiting for input. 請貼上訊息後按「分析」。");
      document.getElementById("actionList").innerHTML =
        "<li>尚未分析。分析訊息後會產生具體建議。</li>";
      document.getElementById("scbkrStatus").textContent = "Status：Idle 待分析";
      document.getElementById("sText").textContent = "尚未分析。";
      document.getElementById("cText").textContent = "尚未分析。";
      document.getElementById("bText").textContent = "尚未分析。";
      document.getElementById("kText").textContent = "尚未分析。";
      document.getElementById("rText").textContent = "尚未分析。";
      document.getElementById("evidenceList").innerHTML =
        "<li>尚未分析。分析後會列出關鍵字、威脅／獎勵模式與可疑語氣。</li>";
      document.getElementById("evidenceCount").textContent = "偵測到 0 個特徵";
      document.getElementById("roleText").textContent =
        "模型角色 = Tool Only 工具層；尚未對此訊息進行角色檢查。";
    }

    function setRisk(level, text) {
      const badge = document.getElementById("riskBadge");
      badge.className = "risk-chip";
      let label;
      switch (level) {
        case "SAFE":
          badge.classList.add("risk-safe");
          label = "SAFE｜安全的";
          break;
        case "RISK":
          badge.classList.add("risk-risk");
          label = "RISK｜有風險";
          break;
        case "FATAL":
          badge.classList.add("risk-fatal");
          label = "FATAL｜高度危險";
          break;
        case "NON-CLOSABLE":
          badge.classList.add("risk-nonclosable");
          label = "NON-CLOSABLE｜不可結案";
          break;
      }
      badge.textContent = label;
      document.getElementById("riskText").innerHTML = text;
    }

    function analyzeMessage() {
      const raw = document.getElementById("messageInput").value.trim();
      if (!raw) {
        alert("請先貼上要分析的訊息。");
        return;
      }

      const text = raw;
      const lower = text.toLowerCase();

      const patterns = {
        isBank: /(銀行|bank|atm|帳戶|帳號)/i.test(text),
        hasLink: /(http|https|www\.|連結|網址|url)/i.test(lower),
        timePressure: /(30 ?分鐘|三十分鐘|立即|立刻|馬上|限時|today only|within 30 minutes)/i.test(text),
        askPersonal: /(身分證|身份證|id|密碼|驗證碼|驗證|卡號|信用卡|安全碼)/i.test(text),
        threat: /(凍結|停用|停權|法院|檢察|警察|罰款|扣押|違規|鎖定)/i.test(text),
        moneyTransfer: /(匯款|轉帳|匯入|remit|wire|指定帳戶|安全帳戶)/i.test(text),
        reward: /(中獎|回饋|折扣|贈品|返現|reward|bonus)/i.test(text)
      };
const scoreDanger = Object.values(patterns).filter(Boolean).length -
        (patterns.reward ? 1 : 0);

      let risk = "SAFE";
      if (scoreDanger >= 1) risk = "RISK";
      if (scoreDanger >= 3) risk = "FATAL";
      if (scoreDanger >= 4 && (patterns.askPersonal || patterns.moneyTransfer) && (patterns.hasLink || patterns.threat)) {
        risk = "NON-CLOSABLE";
      }

      // Risk text
      let riskText = "";
      if (risk === "SAFE") {
        riskText =
          "目前未偵測到明顯詐騙語意特徵，但仍請留意官方通知管道，避免直接點擊不熟悉連結。";
      } else if (risk === "RISK") {
        riskText =
          "<strong>此訊息包含多項風險特徵。</strong> 建議暫停回覆與點擊，改由官方客服或原機構官網自行查證。";
      } else if (risk === "FATAL") {
        riskText =
          "<strong>此訊息高度可疑，具備威脅語氣、時間壓力與個資或款項要求。</strong> 高度疑似詐騙，請勿依照內容進行任何匯款或提供資料。";
      } else {
        riskText =
          "<strong>此訊息在風險與責任鏈上均不完整，屬「不可結案 NON-CLOSABLE」級別。</strong> 在沒有官方機構書面與獨立驗證前，不應採信或執行任何指示。";
      }
      setRisk(risk, riskText);

      // SCBKR
      const subjectPresent = /(本行|我們|客服|專員|公司|bank|官方)/i.test(text);
      const causeThreat = patterns.threat || patterns.timePressure;
      const boundaryClear = /(官方網站|官網|客服電話|分行|櫃檯)/i.test(text);
      const costExplicit = patterns.askPersonal || patterns.moneyTransfer;
      const respMention = /(負責|申訴|客服專線|條款|合約)/i.test(text);
document.getElementById("scbkrStatus").textContent =
        "Status：已分析（核心缺失 " +
        [
          subjectPresent ? 0 : 1,
          boundaryClear ? 0 : 1,
          costExplicit ? 0 : 1,
          respMention ? 0 : 1
        ].reduce((a, b) => a + b, 0) +
        " 項）";

      document.getElementById("sText").innerHTML = subjectPresent
        ? "訊息中出現了自稱主體，如「本行／客服／某公司」。<br><strong>需進一步確認是否真為該機構。</strong>"
        : "<strong>缺失：</strong> 未清楚說明發話者身分，僅提及「您的帳戶／您的資料」，提高風險。";

      document.getElementById("cText").innerHTML = causeThreat
        ? "以「凍結帳戶、停權、罰款」等風險作為理由，屬於典型威脅式誘導。"
        : "理由相對一般或中性，未明確以恐嚇或緊急威脅作為主軸。";

      document.getElementById("bText").innerHTML = boundaryClear
        ? "有提供部分處理管道（如官網或客服電話），但仍需自行查證是否為真實官方資訊。"
        : "<strong>缺失：</strong> 未清楚說明合法處理流程與邊界，只強調「立即處理／點擊連結」，屬高風險模式。";

      document.getElementById("kText").innerHTML = costExplicit
        ? "訊息內容涉及<strong>金流或個資成本</strong>（如匯款、提供帳號密碼、驗證碼等），一旦採信可能造成實質損失。"
        : "目前並未直接要求金錢或個資，但若搭配其他風險特徵，仍需謹慎看待。";

      document.getElementById("rText").innerHTML = respMention
        ? "有提及條款或申訴等片段，<strong>但在詐騙情境中通常為偽裝用字</strong>，不可單憑字面信任。"
        : "<strong>缺失：</strong> 未說明若發生錯誤或爭議時由誰負責，呈現「只要你照做，出事你自己負責」的單向要求。";

      // Evidence patterns
      const evidences = [];
      if (patterns.isBank)
        evidences.push("提及「銀行／帳戶」相關用語，常見於金融類詐騙。");
      if (patterns.hasLink)
        evidences.push("包含連結或網址，可能導向釣魚網站或假登入頁面。");
      if (patterns.timePressure)
        evidences.push("出現「30 分鐘內、立即、立刻」等時間壓力字眼。");
      if (patterns.askPersonal)
        evidences.push("要求提供密碼、驗證碼、身分證或卡號等敏感個資。");
      if (patterns.threat)
        evidences.push("使用「凍結、停權、罰款、扣押」等威脅語氣。");
      if (patterns.moneyTransfer)
        evidences.push("要求匯款或轉帳至「指定／安全」帳戶。");
      if (patterns.reward)
        evidences.push("以中獎、返現或獎勵作為誘因，可能是釣魚型訊息。");

      const evidenceList = document.getElementById("evidenceList");
      evidenceList.innerHTML = "";
      if (evidences.length === 0) {
        evidenceList.innerHTML =
          "<li>目前尚未偵測到明顯詐騙語意特徵，但仍建議透過第二管道查證。</li>";
      } else {
        evidences.forEach((e) => {
          const li = document.createElement("li");
          li.textContent = e;
          evidenceList.appendChild(li);
        });
      }
      document.getElementById("evidenceCount").textContent =
        "偵測到 " + evidences.length + " 個特徵";

      // Role integrity (Ex(y)=π)
      const roleText = document.getElementById("roleText");
      if (/(銀行|bank|政府|警察|法院|檢察|官方|平台|客服中心)/i.test(text)) {
        roleText.innerHTML =
          "<strong>疑似偽裝成具權威的主體</strong>（如銀行、政府或官方平台）。在 Ex(y)=π 模型下，該訊息不得直接被視為真正決策者指令，必須改由你或真實機構重新確認。";
      } else {
        roleText.innerHTML =
          "目前看起來較像一般訊息，未明顯冒用特定權威角色，但仍需留意其中是否有不合理要求。";
      }

      // Action guidance
      const actionList = document.getElementById("actionList");
      actionList.innerHTML = "";
      const addAction = (txt) => {
        const li = document.createElement("li");
        li.innerHTML = txt;
        actionList.appendChild(li);
      };

      if (risk === "SAFE") {
        addAction(
          "請勿在陌生環境下輸入任何密碼或驗證碼，若仍感不安，可改由官網或官方 APP 重新登入確認。"
        );
        addAction(
          "對於聲稱來自銀行／平台的訊息，可直接撥打卡片背面或官方網站公布的電話核實。"
        );
      } else if (risk === "RISK") {
        addAction(
          "<strong>暫停回覆或點擊任何連結。</strong> 先透過官方網站、客服電話或親自臨櫃查證。"
        );
        addAction(
          "若訊息來自親友帳號，請改用另一個聯絡方式（例如直接打電話）確認對方是否真的發出。"
        );
        addAction(
          "可將此訊息截圖，作為日後報案或向銀行／電信業者申訴的輔助證據。"
        );
      } else if (risk === "FATAL" || risk === "NON-CLOSABLE") {
        addAction(
          "<strong>請完全忽略訊息中的任何匯款、點擊、提供資料等要求。</strong> 不要依照訊息指示進行任何操作。"
        );
        addAction(
          "立即透過銀行卡片背面的電話或官方網站聯絡原機構，詢問是否真的有「凍結、停權、扣款」等情況。"
        );
        addAction(
          "若已不慎提供資訊，請盡快聯絡銀行、電信或警方，說明情況並請求協助。"
        );
      }
    }
  </script>
</body>
</html>

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--cyan);
      box-shadow: 0 0 10px rgba(55, 242, 255, 0.9);
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 16px;
    }

